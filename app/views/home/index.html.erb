<main style="max-width: 760px; margin: 2rem auto; font-family: sans-serif;">
  <h1>Login with LEARN (OAuth 2.0 + OIDC)</h1>

  <% if flash[:notice] %>
    <p style="color: #0f5132;"><%= flash[:notice] %></p>
  <% end %>

  <% if flash[:alert] %>
    <p style="color: #842029;"><%= flash[:alert] %></p>
  <% end %>

  <% if @learn_uid.present? %>
    <p><strong>Signed in user UID:</strong> <%= @learn_uid %></p>
    <p><strong>Name:</strong> <%= @learn_user["name"] %></p>
    <p><strong>Email:</strong> <%= @learn_user["email"] %></p>
    <p><strong>Access token present:</strong> <%= @learn_token.present? %></p>

    <%= button_to "Logout", logout_path, method: :delete %>
  <% else %>
    <p>Use the button below to start the LEARN Authorization Code + PKCE flow.</p>
    <%= button_to "Login with LEARN", "/auth/learn", method: :post %>
  <% end %>

  <hr>

  <p>
    <strong>Provider callback path:</strong>
    <code>/auth/learn/callback</code>
  </p>
  <p>
    In development this is usually:
    <code>http://localhost:3000/auth/learn/callback</code>
  </p>
</main>
